

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Resolvers &mdash; Sceptre 3.2.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Architecting Sceptre" href="architecture.html" />
    <link rel="prev" title="Hooks" href="hooks.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Sceptre
          

          
          </a>

          
            
            
              <div class="version">
                dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="get_started.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="stack_group_config.html">StackGroup Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="stack_config.html">Stack Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="template_handlers.html">Template Handlers</a></li>
<li class="toctree-l1"><a class="reference internal" href="hooks.html">Hooks</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Resolvers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#available-resolvers">Available Resolvers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#environment-variable">environment_variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file">file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-contents">file_contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="#no-value">no_value</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rcmd">rcmd</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stack-attr">stack_attr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stack-output">stack_output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stack-output-external">stack_output_external</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#custom-resolvers">Custom Resolvers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#custom-resolver-py">custom_resolver.py</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setup-py">setup.py</a></li>
<li class="toctree-l4"><a class="reference internal" href="#calling-aws-services-in-your-custom-resolver">Calling AWS services in your custom resolver</a></li>
<li class="toctree-l4"><a class="reference internal" href="#resolver-arguments">Resolver arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#resolving-to-nothing">Resolving to nothing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#resolver-placeholders">Resolver placeholders</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecting Sceptre</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions.html">Sceptre and IAM</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/modules.html">sceptre</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Sceptre</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Resolvers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/docs/resolvers.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="resolvers">
<h1>Resolvers<a class="headerlink" href="#resolvers" title="Permalink to this heading">¶</a></h1>
<p>Sceptre implements resolvers, which can be used to resolve a value of a
CloudFormation <code class="docutils literal notranslate"><span class="pre">parameter</span></code> or <code class="docutils literal notranslate"><span class="pre">sceptre_user_data</span></code> value at runtime. This is
most commonly used to chain the outputs of one Stack to the inputs of another.</p>
<p>If required, users can create their own resolvers, as described in the section
on <a class="reference external" href="#custom-resolvers">Custom Resolvers</a>.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">  </span><span class="nt">&lt;parameter_name&gt;</span><span class="p">:</span><span class="w"> </span><span class="kt">!&lt;resolver_name&gt;</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;resolver_value&gt;</span>
<span class="nt">sceptre_user_data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span><span class="p">:</span><span class="w"> </span><span class="kt">!&lt;resolver_name&gt;</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;resolver_value&gt;</span>
</pre></div>
</div>
<div class="section" id="available-resolvers">
<h2>Available Resolvers<a class="headerlink" href="#available-resolvers" title="Permalink to this heading">¶</a></h2>
<div class="section" id="environment-variable">
<h3>environment_variable<a class="headerlink" href="#environment-variable" title="Permalink to this heading">¶</a></h3>
<p>Fetches the value from an environment variable.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">parameter|sceptre_user_data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span><span class="p">:</span><span class="w"> </span><span class="kt">!environment_variable</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ENVIRONMENT_VARIABLE_NAME</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">database_password</span><span class="p">:</span><span class="w"> </span><span class="kt">!environment_variable</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DATABASE_PASSWORD</span>
</pre></div>
</div>
</div>
<div class="section" id="file">
<h3>file<a class="headerlink" href="#file" title="Permalink to this heading">¶</a></h3>
<p>A Sceptre resolver to get file contents. The returned value can be passed into a parameter as
a string, json, or yaml object.</p>
<p>Refer to <a class="reference external" href="https://github.com/Sceptre/sceptre-file-resolver/">sceptre-file-resolver</a> for documentation.</p>
</div>
<div class="section" id="file-contents">
<h3>file_contents<a class="headerlink" href="#file-contents" title="Permalink to this heading">¶</a></h3>
<p><strong>deprecated</strong>: Consider using the <a class="reference internal" href="#file">file</a> resolver instead.</p>
</div>
<div class="section" id="no-value">
<h3>no_value<a class="headerlink" href="#no-value" title="Permalink to this heading">¶</a></h3>
<p>This resolver “resolves to nothing”, functioning just as if it was not set at all. This works just
like the “AWS::NoValue” special variable that you can reference on a CloudFormation template. It
can help simplify Stack and StackGroup config Jinja logic in cases where, if a condition is met, a
value is passed, otherwise no value is passed.</p>
<p>For example, you could use this resolver like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">parameters</span><span class="p">:</span>
<span class="w"> </span><span class="nt">my_parameter</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">var.some_value_that_might_not_be_set | default(&#39;!no_value&#39;)</span><span class="w"> </span><span class="p p-Indicator">}}</span>
</pre></div>
</div>
<p>In this example, if <code class="docutils literal notranslate"><span class="pre">var.some_value_that_might_not_be_set</span></code> is set, <code class="docutils literal notranslate"><span class="pre">my_parameter</span></code> will be set to
that value. But if <code class="docutils literal notranslate"><span class="pre">var.some_value_that_might_not_be_set</span></code> is not actually set, <code class="docutils literal notranslate"><span class="pre">my_parameter</span></code>
won’t even be passed to CloudFormation at all. This might be desired if there is a default value on
the CloudFormation template for <code class="docutils literal notranslate"><span class="pre">my_parameter</span></code> and we’d want to fall back to that default.</p>
</div>
<div class="section" id="rcmd">
<h3>rcmd<a class="headerlink" href="#rcmd" title="Permalink to this heading">¶</a></h3>
<p>A resolver to execute any shell command.</p>
<p>Refer to <a class="reference external" href="https://github.com/Sceptre/sceptre-resolver-cmd/">sceptre-resolver-cmd</a> for documentation.</p>
</div>
<div class="section" id="stack-attr">
<span id="stack-attr-resolver"></span><h3>stack_attr<a class="headerlink" href="#stack-attr" title="Permalink to this heading">¶</a></h3>
<p>This resolver resolves to the values of other fields on the same Stack Config or those
inherited from StackGroups in which the current Stack Config exists, even when those other fields are
also resolvers.</p>
<p>To understand why this is useful, consider a stack’s <code class="docutils literal notranslate"><span class="pre">template_bucket_name</span></code>. This is usually set on
the highest level StackGroup Config. Normally, you could reference the template_bucket_name that was
set in an outer StackGroup Config with Jinja using <code class="docutils literal notranslate"><span class="pre">{{template_bucket_name}}</span></code> or, more explicitly, with
<code class="docutils literal notranslate"><span class="pre">{{stack_group_config.template_bucket_name}}</span></code>.</p>
<p>However, if the value of <code class="docutils literal notranslate"><span class="pre">template_bucket_name</span></code> is set with a resolver, using Jinja won’t work.
This is due to the <a class="reference internal" href="stack_config.html#resolution-order"><span class="std std-ref">Resolution order of values</span></a> on a Stack Config. Jinja configs are rendered <em>before</em>
resolvers are constructed or resolved, so you can’t resolve a resolver from a StackGroup Config via
Jinja. That’s where !stack_attr is useful. It’s a resolver that resolves to the value of another stack
attribute (which could be another resolver).</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sam</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">path/from/my/cwd/template.yaml</span>
<span class="w">    </span><span class="c1"># template_bucket_name could be set by a resolver in the StackGroup.</span>
<span class="w">    </span><span class="nt">artifact_bucket_name</span><span class="p">:</span><span class="w"> </span><span class="kt">!stack_attr</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">template_bucket_name</span>
</pre></div>
</div>
<p>The argument to this resolver is the full attribute “path” from the Stack Config. You can access
nested values in dicts and lists using “.” to separate key/index segments. For example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">sceptre_user_data</span><span class="p">:</span>
<span class="w">    </span><span class="nt">key</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;some</span><span class="nv"> </span><span class="s">random</span><span class="nv"> </span><span class="s">value&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;the</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">we</span><span class="nv"> </span><span class="s">want</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">select&quot;</span>

<span class="nt">iam_role</span><span class="p">:</span><span class="w"> </span><span class="kt">!stack_output</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">roles.yaml::RoleArn</span>

<span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># This will pass the value of &quot;the value we want to select&quot; for my_parameter</span>
<span class="w">    </span><span class="nt">my_parameter</span><span class="p">:</span><span class="w"> </span><span class="kt">!stack_attr</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sceptre_user_data.key.1</span>
<span class="w">    </span><span class="c1"># You can also access the value of another resolvable property like this:</span>
<span class="w">    </span><span class="nt">use_role_arn</span><span class="p">:</span><span class="w"> </span><span class="kt">!stack_attr</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">iam_role</span>
</pre></div>
</div>
</div>
<div class="section" id="stack-output">
<h3>stack_output<a class="headerlink" href="#stack-output" title="Permalink to this heading">¶</a></h3>
<p>Fetches the value of an output from a different Stack controlled by Sceptre.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">parameters | sceptre_user_data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span><span class="p">:</span><span class="w"> </span><span class="kt">!stack_output</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;stack_name&gt;.yaml::&lt;output_name&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">VpcIdParameter</span><span class="p">:</span><span class="w"> </span><span class="kt">!stack_output</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">shared/vpc.yaml::VpcIdOutput</span>
</pre></div>
</div>
<p>Sceptre infers that the Stack to fetch the output value from is a dependency,
adding that stack to the current stack’s list of dependencies. This instructs
Sceptre to build that Stack before the current one.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Be careful when using the stack_output resolver that you do not create circular dependencies.
This is especially true when using this on StackGroup Configs to create configurations
to be inherited by all stacks in that group. If the <cite>!stack_output</cite> resolver would be “inherited”
from a StackGroup Config by the stack it references, this will lead to a circular dependency.
The correct way to work around this is to move that stack outside that StackGroup so that it
doesn’t “inherit” that resolver.</p>
</div>
</div>
<div class="section" id="stack-output-external">
<h3>stack_output_external<a class="headerlink" href="#stack-output-external" title="Permalink to this heading">¶</a></h3>
<p>Fetches the value of an output from a different Stack in the same account and
region. You can specify a optional AWS profile to connect to a different
account/region.</p>
<p>If the Stack whose output is being fetched is in the same StackGroup, the
basename of that Stack can be used.</p>
<p>Syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">parameters/sceptre_user_data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">&lt;name&gt;</span><span class="p">:</span><span class="w"> </span><span class="kt">!stack_output_external</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;full_stack_name&gt;::&lt;output_name&gt; &lt;optional-aws-profile-name&gt;</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">  </span><span class="nt">VpcIdParameter</span><span class="p">:</span><span class="w"> </span><span class="kt">!stack_output_external</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prj-network-vpc::VpcIdOutput prod</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="custom-resolvers">
<h2>Custom Resolvers<a class="headerlink" href="#custom-resolvers" title="Permalink to this heading">¶</a></h2>
<p>Users can define their own resolvers which are used by Sceptre to resolve the
value of a parameter before it is passed to the CloudFormation template.</p>
<p>A resolver is a Python class which inherits from abstract base class
<code class="docutils literal notranslate"><span class="pre">Resolver</span></code> found in the <code class="docutils literal notranslate"><span class="pre">sceptre.resolvers</span> <span class="pre">module</span></code>.</p>
<p>Resolvers are require to implement a <code class="docutils literal notranslate"><span class="pre">resolve()</span></code> function that takes no
parameters and to call the base class initializer on initialisation.</p>
<p>Resolvers may have access to <code class="docutils literal notranslate"><span class="pre">argument</span></code>, <code class="docutils literal notranslate"><span class="pre">stack_config</span></code>,
<code class="docutils literal notranslate"><span class="pre">stack_group_config</span></code> and <code class="docutils literal notranslate"><span class="pre">connection_manager</span></code> as an attribute of <code class="docutils literal notranslate"><span class="pre">self</span></code>.
For example <code class="docutils literal notranslate"><span class="pre">self.stack_config</span></code>.</p>
<p>Sceptre uses the <code class="docutils literal notranslate"><span class="pre">sceptre.resolvers</span></code> entry point to locate resolver classes.
Your custom resolver can be written anywhere and is installed as Python
package.
In case you are not familiar with python packaging, <a class="reference external" href="https://docs.python.org/3/distributing/">this is great place to start</a>.</p>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h3>
<p>The following python module template can be copied and used:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>custom_resolver
├── custom_resolver.py
└── setup.py
</pre></div>
</div>
<p>The following python module template can be copied and used:</p>
<div class="section" id="custom-resolver-py">
<h4>custom_resolver.py<a class="headerlink" href="#custom-resolver-py" title="Permalink to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sceptre.resolvers</span> <span class="kn">import</span> <span class="n">Resolver</span>


<span class="k">class</span> <span class="nc">CustomResolver</span><span class="p">(</span><span class="n">Resolver</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The following instance attributes are inherited from the parent class Resolver.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    argument: Any</span>
<span class="sd">        The argument of the resolver. This can be any value able to be defined in yaml.</span>
<span class="sd">    stack: sceptre.stack.Stack</span>
<span class="sd">        The associated stack of the resolver. This will normally be None when the resolver is</span>
<span class="sd">        instantiated, but will be set before the resolver is resolved.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">,</span> <span class="n">stack</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CustomResolver</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">stack</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Setup is invoked after the stack has been set on the resolver, whether or not the</span>
<span class="sd">        resolver is ever resolved.</span>

<span class="sd">        Implement this method for any setup behavior you want (such as adding to stack dependencies).</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        resolve is the method called by Sceptre. It should carry out the work</span>
<span class="sd">        intended by this resolver. It should return a string to become the</span>
<span class="sd">        final value.</span>

<span class="sd">        To use instance attribute self.&lt;attribute_name&gt;.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        self.argument</span>
<span class="sd">        self.stack</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Resolved value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">argument</span>
</pre></div>
</div>
</div>
<div class="section" id="setup-py">
<h4>setup.py<a class="headerlink" href="#setup-py" title="Permalink to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;&lt;custom_resolver_package_name&gt;&#39;</span><span class="p">,</span>
    <span class="n">py_modules</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&lt;custom_resolver_module_name&gt;&#39;</span><span class="p">],</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;sceptre.resolvers&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;&lt;custom_resolver_command_name&gt; = &lt;custom_resolver_module_namef&gt;:CustomResolver&#39;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Then install using <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code> or <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">.</span></code> commands.</p>
<p>This resolver can be used in a Stack config file with the following syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">template</span><span class="p">:</span>
<span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;...&gt;</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;...&gt;</span>
<span class="nt">parameters</span><span class="p">:</span>
<span class="w">  </span><span class="nt">param1</span><span class="p">:</span><span class="w"> </span><span class="kt">!&lt;custom_resolver_command_name&gt;</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;value&gt; &lt;optional-aws-profile&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="calling-aws-services-in-your-custom-resolver">
<h4>Calling AWS services in your custom resolver<a class="headerlink" href="#calling-aws-services-in-your-custom-resolver" title="Permalink to this heading">¶</a></h4>
<p>For details on calling AWS services or invoking AWS-related third party tools in your resolver, see
<a class="reference internal" href="faq.html#using-connection-manager"><span class="std std-ref">How do I call AWS services or use AWS-based tools in my custom hook/resolver/template handler?</span></a></p>
</div>
<div class="section" id="resolver-arguments">
<h4>Resolver arguments<a class="headerlink" href="#resolver-arguments" title="Permalink to this heading">¶</a></h4>
<p>Resolver arguments can be a simple string or a complex data structure.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">template</span><span class="p">:</span>
<span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;...&gt;</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;...&gt;</span>
<span class="w w-Error"> </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">   </span><span class="nt">Param1</span><span class="p">:</span><span class="w"> </span><span class="kt">!ssm</span><span class="w"> </span><span class="s">&quot;/dev/DbPassword&quot;</span>
<span class="w">   </span><span class="nt">Param2</span><span class="p">:</span><span class="w"> </span><span class="kt">!ssm</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;/dev/DbPassword&quot;</span><span class="p p-Indicator">}</span>
<span class="w">   </span><span class="nt">Param3</span><span class="p">:</span><span class="w"> </span><span class="kt">!ssm</span>
<span class="w">     </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/dev/DbPassword&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="resolving-to-nothing">
<h4>Resolving to nothing<a class="headerlink" href="#resolving-to-nothing" title="Permalink to this heading">¶</a></h4>
<p>When a resolver returns <code class="docutils literal notranslate"><span class="pre">None</span></code>, this means that it resolves to “nothing”. For resolvers set for
single values (such as for <code class="docutils literal notranslate"><span class="pre">template_bucket_name</span></code> or <code class="docutils literal notranslate"><span class="pre">role_arn</span></code>), this just means the value is
<code class="docutils literal notranslate"><span class="pre">None</span></code> and treated like those values aren’t actually set. But for resolvers inside of containers
like lists or dicts, when they resolve to “nothing”, that item gets completely removed from their
containing list or dict.</p>
<p>This feature would be useful if you wanted to define a resolver that sometimes would resolve to be a
given stack parameter and sometimes would be not defined at all and use the template’s default value
for that parameter. The resolver could just return <cite>None</cite> in those cases it wants to resolve to
nothing, similar to the AWS::NoValue pseudo-parameter that can be referenced in a CloudFormation
template.</p>
</div>
<div class="section" id="resolver-placeholders">
<h4>Resolver placeholders<a class="headerlink" href="#resolver-placeholders" title="Permalink to this heading">¶</a></h4>
<p>Resolvers (especially the !stack_output resolver) often express dependencies on other stacks and
their outputs. However, there are times when those stacks or outputs will not exist yet because they
have not yet been deployed. During normal deployment operations (using the <code class="docutils literal notranslate"><span class="pre">launch</span></code>, <code class="docutils literal notranslate"><span class="pre">create</span></code>,
<code class="docutils literal notranslate"><span class="pre">update</span></code>, and <code class="docutils literal notranslate"><span class="pre">delete</span></code> commands), Sceptre knows the correct order to resolve dependencies in and will
ensure that order is followed, so everything works as expected.</p>
<p>But there are other commands that will not actually deploy dependencies of a stack config before
operating on that Stack Config. These commands include <code class="docutils literal notranslate"><span class="pre">generate</span></code>, <code class="docutils literal notranslate"><span class="pre">validate</span></code>, and <code class="docutils literal notranslate"><span class="pre">diff</span></code>.
If you have used resolvers to reverence other stacks, it is possible that a resolver might not be able
to be resolved when performing that command’s operations and will trigger an error. This is not likely
to happen when you have only used resolvers in a stack’s <code class="docutils literal notranslate"><span class="pre">parameters</span></code>, but it is much more likely
if you have used them in <code class="docutils literal notranslate"><span class="pre">sceptre_user_data</span></code> with a Jinja or Python template. At those times (and
only when a resolver cannot be resolved), a <strong>best-attempt placeholder value</strong> will be supplied in to
allow the command to proceed. Depending on how your template or Stack Config is configured, the
command may or may not actually succeed using that placeholder value.</p>
<p>A few examples…</p>
<ul class="simple">
<li><p>If you have a stack parameter referencing <code class="docutils literal notranslate"><span class="pre">!stack_output</span> <span class="pre">other_stack.yaml::OutputName</span></code>,
and you run the <code class="docutils literal notranslate"><span class="pre">diff</span></code> command before other_stack.yaml has been deployed, the diff output will
show the value of that parameter to be <code class="docutils literal notranslate"><span class="pre">&quot;{</span> <span class="pre">!StackOutput(other_stack.yaml::OutputName)</span> <span class="pre">}&quot;</span></code>.</p></li>
<li><p>If you have a <code class="docutils literal notranslate"><span class="pre">sceptre_user_data</span></code> value used in a Jinja template referencing
<code class="docutils literal notranslate"><span class="pre">!stack_output</span> <span class="pre">other_stack.yaml::OutputName</span></code> and you run the <code class="docutils literal notranslate"><span class="pre">generate</span></code> command, the generated
template will replace that value with <code class="docutils literal notranslate"><span class="pre">&quot;StackOutputotherstackyamlOutputName&quot;</span></code>. This isn’t as
“pretty” as the sort of placeholder used for stack parameters, but the use of sceptre_user_data is
broader, so it placeholder values can only be alphanumeric to reduce chances of it breaking the
template.</p></li>
<li><p>Resolvable properties that are <em>always</em> used when performing template operations (like <code class="docutils literal notranslate"><span class="pre">iam_role</span></code>
and <code class="docutils literal notranslate"><span class="pre">template_bucket_name</span></code>) will resolve to <code class="docutils literal notranslate"><span class="pre">None</span></code> and not be used for those operations if they
cannot be resolved.</p></li>
</ul>
<p>Any command that allows these placeholders can have them disabled with the <code class="docutils literal notranslate"><span class="pre">--no-placeholders</span></code> ClI
option.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="architecture.html" class="btn btn-neutral float-right" title="Architecting Sceptre" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="hooks.html" class="btn btn-neutral float-left" title="Hooks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018, Cloudreach.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  
    <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: dev
      <span class="fa fa-caret-down"></span>
    </span>

        <div class="rst-other-versions">
            <dl id="other-versions">
                <dt>Versions</dt>
            </dl>
            <dl>
                
                <dt>Other Links</dt>
                

                    <dd>
                        <a href="https://www.cloudreach.com">Cloudreach</a>
                    </dd>
                

                    <dd>
                        <a href="https://docs.sceptre-project.org">Sceptre Home</a>
                    </dd>
                
            </dl>
            <hr/>
            Original template provided by <a href="http://www.readthedocs.org">Read the Docs</a>.
        </div>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                $.getScript("../../version-helper.js").done(
                    function () {
                        versions.forEach(function (item, index) {
                            if (item !== "dev") {
                                $('#other-versions').append('<dd><a href="'+ window.location.origin + '/' + item +'">' + item + "<a/></dd>");
                            }
                        })
                    });
            });
        </script>
    </div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>